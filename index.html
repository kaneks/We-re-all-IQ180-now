<!DOCTYPE html>
<html lang="en" ng-app="myapp">

	<head>
		<!-- Meta -->
		<meta charset="utf-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>

		<!-- Title -->
		<title>IQ180</title>

		<!--Bootstrap-->
		<link rel="stylesheet" href="css/bootstrap.min.css"/>
		<link rel="stylesheet" href="css/bootstrap-theme.min.css"/>
		<link rel="stylesheet" href="css/calculator.css"/>
		<script src="lib/bootstrap.js"></script>

		<!--jQuery-->
		<script src="lib/jquery-3.1.1.min.js"></script>

		<!--AngularJS-->
		<script src="lib/angular.min.js"></script>
		<script src="lib/angular-route.min.js"></script>
		<script src="lib/angular-animate.js"></script>
		<script src="lib/ui-bootstrap-tpls-1.2.5.min.js"></script>

		<!--Socket-->
		<script src="lib/socket.io-1.2.0.js"></script>

		<!--Drawingboard-->
		<script src="lib/drawingboard.min.js"></script>

		<!--CustomJS-->
		<script src="js/Module.js"></script>
		<script src="js/HomeCtrl.js"></script>
		<script src="js/PlayCtrl.js"></script>
		<script src="js/WaitCtrl.js"></script>
		<script src="js/ReadyCtrl.js"></script>
		<script src="js/SocketFactory.js"></script>
		<script src='js/WinLoseCtrl.js'></script>
		<script src="js/index.js"></script>

	</head>

	<body id="mybody">

		<nav class="navbar navbar-default">
			<div class="container-fluid">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<a class="navbar-brand">IQ-180</a>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li><a onclick = "changeToOceanBG()">Ocean</a></li>
						<li><a onclick = "changeToSpaceBG()">Space</a></li>
					</ul>
					<div class="navbar-form navbar-left">
						<a><audio class="center-block" controls="controls" loop="loop"><source src="song.mp3" type="audio/mpeg"/></audio></a>
					</div>
					<ul class="nav navbar-nav navbar-right">
						<li><a><div ng-controller='TimeCtrl'>{{ clock | date:'HH:mm:ss'}}</div></a></li>
					</ul>
				</div><!-- /.navbar-collapse -->
			</div><!-- /.container-fluid -->
		</nav>
		<style>
body {
    background-image: url(ocean.jpg);
}
		</style>


		<!--<div class="center-block" ng-view></div>-->
		<div ng-view></div>
		<div class="calculator">
			<div class="input" id="input"></div>
			<div class="buttons">
				<div class="operators">
					<div>+</div>
					<div>-</div>
					<div>&times;</div>
					<div>&divide;</div>
				</div>
				<div class="leftPanel">
					<div class="numbers">
						<div>7</div>
						<div>8</div>
						<div>9</div>
					</div>
					<div class="numbers">
						<div>4</div>
						<div>5</div>
						<div>6</div>
					</div>
					<div class="numbers">
						<div>1</div>
						<div>2</div>
						<div>3</div>
					</div>
					<div class="numbers">
						<div>0</div>
						<div>.</div>
						<div id="clear">C</div>
					</div>
				</div>
				<div class="equal" id="result">=</div>
			</div>
		</div>
		<script>
		"use strict";
var input = document.getElementById('input'), number = document.querySelectorAll('.numbers div'), operator = document.querySelectorAll('.operators div'), result = document.getElementById('result'), clear = document.getElementById('clear'), resultDisplayed = false;
for (var i = 0; i < number.length; i++) {
	number[i].addEventListener("click", function (e) {
		var currentString = input.innerHTML;
		var lastChar = currentString[currentString.length - 1];
		if (resultDisplayed === false) {
			input.innerHTML += e.target.innerHTML;
		} else if (resultDisplayed === true && lastChar === "+" || lastChar === "-" || lastChar === "×" || lastChar === "÷") {
			resultDisplayed = false;
			input.innerHTML += e.target.innerHTML;
		} else {
			resultDisplayed = false;
			input.innerHTML = "";
			input.innerHTML += e.target.innerHTML;
		}
	});
}
for (var i = 0; i < operator.length; i++) {
	operator[i].addEventListener("click", function (e) {
		var currentString = input.innerHTML;
		var lastChar = currentString[currentString.length - 1];
		if (lastChar === "+" || lastChar === "-" || lastChar === "×" || lastChar === "÷") {
			var newString = currentString.substring(0, currentString.length - 1) + e.target.innerHTML;
			input.innerHTML = newString;
		} else if (currentString.length == 0) {
			console.log("enter a number first");
		} else {
			input.innerHTML += e.target.innerHTML;
		}
	});
}
result.addEventListener("click", function () {
	var inputString = input.innerHTML;
	var numbers = inputString.split(/\+|\-|\×|\÷/g);
	var operators = inputString.replace(/[0-9]|\./g, "").split("");
	console.log(inputString);
	console.log(operators);
	console.log(numbers);
	console.log("----------------------------");
	var divide = operators.indexOf("÷");
	while (divide != -1) {
		numbers.splice(divide, 2, numbers[divide] / numbers[divide + 1]);
		operators.splice(divide, 1);
		divide = operators.indexOf("÷");
	}
	var multiply = operators.indexOf("×");
	while (multiply != -1) {
		numbers.splice(multiply, 2, numbers[multiply] * numbers[multiply + 1]);
		operators.splice(multiply, 1);
		multiply = operators.indexOf("×");
	}
	var subtract = operators.indexOf("-");
	while (subtract != -1) {
		numbers.splice(subtract, 2, numbers[subtract] - numbers[subtract + 1]);
		operators.splice(subtract, 1);
		subtract = operators.indexOf("-");
	}
	var add = operators.indexOf("+");
	while (add != -1) {
		numbers.splice(add, 2, parseFloat(numbers[add]) + parseFloat(numbers[add + 1]));
		operators.splice(add, 1);
		add = operators.indexOf("+");
	}
	input.innerHTML = numbers[0];
	resultDisplayed = true;
});
clear.addEventListener("click", function () {
	input.innerHTML = "";
});

        function changeToOceanBG() {
        $('#mybody').css('background-image', 'url(/ocean.jpg)');
    }

    function changeToSpaceBG() {
        $('#mybody').css("background-image", "url(/space.jpg)");
    }

			</script>
	</body>
</html>
				